#
#  Copyright
#

CMAKE_MINIMUM_REQUIRED(VERSION 2.6)

INCLUDE(cmake/base.cmake)
INCLUDE(cmake/cpack.cmake)

SET(PROJECT_NAME bci-interface)
SET(PROJECT_CONTACT )
SET(PROJECT_DESCRIPTION "")
SET(PROJECT_URL "")

SET(CXX_DISABLE_WERROR True)

#SET(PROJECT_VERSION 0.1)

#
#  Specific CmakeModules
#
SETUP_PROJECT()

#
#  Look for dependencies
#

#
# Dependency on bci-middle ware
#
ADD_REQUIRED_DEPENDENCY("bci-middleware")

#
# Dependency on coshell-client 
#
ADD_REQUIRED_DEPENDENCY("coshell-client")
#pkg_check_modules(COSHELLBCI coshell-client)

IF(COSHELL_CLIENT_FOUND)
ADD_DEFINITIONS(-DWITH_COSHELL)
ENDIF(COSHELL_CLIENT_FOUND)

find_package( Boost 1.40.0 COMPONENTS thread system)

IF(Boost_FOUND)
    MESSAGE(STATUS "Found Boost")
    MESSAGE(STATUS "Boost_INCLUDE_DIRS ${Boost_INCLUDE_DIRS}")
	INCLUDE_DIRECTORIES(${Boost_INCLUDE_DIRS})
	LINK_DIRECTORIES(${Boost_LIBRARY_DIRS})
ENDIF(Boost_FOUND)

SET(CMAKE_MODULE_PATH ${CMAKE_CURRENT_SOURCE_DIR}/CMakeModules)

find_package(visionsystem)
find_package(SFML COMPONENTS audio graphics window system)

INCLUDE_DIRECTORIES(${SFML_INCLUDE_DIR} ${VISIONSYSTEM_INCLUDE_DIRS} ${VISIONSYSTEM_EXTRA_INCLUDE_DIRS})
LINK_DIRECTORIES(${VISIONSYSTEM_LIBRARY_DIRS} ${VISIONSYSTEM_LIBRARY_DIRS}/vs_plugins ${VISIONSYSTEM_LIBRARY_DIRS}/vs_controllers ${VISIONSYSTEM_EXTRA_LIBRARY_DIRS})

ADD_SUBDIRECTORY(src)
ADD_SUBDIRECTORY(include)
ADD_SUBDIRECTORY(test)
ADD_SUBDIRECTORY(application)

# Add dependency towards the library in the pkg-config file.
PKG_CONFIG_APPEND_LIBS("bci-interface")

PKG_CONFIG_APPEND_CFLAGS("-I${SFML_INCLUDE_DIR}")
PKG_CONFIG_APPEND_LIBS_RAW("${SFML_LIBRARIES}")

# dependency in vision, visionsystem, configparser.
PKG_CONFIG_APPEND_CFLAGS("-I${VISIONSYSTEM_INCLUDE_DIRS}")
PKG_CONFIG_APPEND_CFLAGS("-I${VISIONSYSTEM_EXTRA_INCLUDE_DIRS}")

PKG_CONFIG_APPEND_LIBRARY_DIR("${VISIONSYSTEM_LIBRARY_DIRS}")
PKG_CONFIG_APPEND_LIBRARY_DIR("${VISIONSYSTEM_LIBRARY_DIRS}/vs_plugins")
PKG_CONFIG_APPEND_LIBRARY_DIR("${VISIONSYSTEM_LIBRARY_DIRS}/vs_controllers")
PKG_CONFIG_APPEND_LIBRARY_DIR("${VISIONSYSTEM_EXTRA_LIBRARY_DIRS}")

PKG_CONFIG_APPEND_LIBS("XmlRpc;xmlrpc-client;visionsystem;vision;configparser")

SETUP_PROJECT_FINALIZE()
SETUP_PROJECT_CPACK()
